<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunny Medicoze</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#f8f9fa;color:#333;}
header{background:white;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;position:fixed;width:100%;top:0;box-shadow:0 2px 10px rgba(0,0,0,0.1);z-index:1000;}
.logo{font-weight:600;font-size:20px;}
.admin-btn{background:#2d3436;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;}

.hero{margin-top:70px;height:40vh;background:url('https://i.ibb.co/xKwmSVJM/fashion-store-front-banners-vector.jpg') center/cover no-repeat;display:flex;align-items:center;justify-content:center;color:white;position:relative;text-align:center;}
.hero::after{content:"";position:absolute;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0;left:0;}
.hero-content{position:relative;z-index:2;}

.products{padding:60px 20px;}
.search-bar{width:100%;max-width:400px;padding:10px;margin-bottom:20px;border-radius:8px;border:1px solid #ccc;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;}
.product{background:white;border-radius:15px;padding:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);text-align:center;}
.product img{width:100%;height:180px;object-fit:cover;border-radius:10px;}
.product button{margin-top:10px;width:100%;padding:10px;background:#0984e3;color:white;border:none;border-radius:8px;cursor:pointer;}
.product button:disabled{background:gray;}
.low-stock{color:red;font-size:12px;margin-top:5px;}

.cart-icon{position:fixed;bottom:80px;right:20px;background:#ff4757;width:55px;height:55px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:20px;cursor:pointer;z-index:1001;}
.cart-count{position:absolute;top:-5px;right:-5px;background:black;color:white;font-size:12px;padding:3px 6px;border-radius:50%;}

.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:none;z-index:1500;}
.overlay.active{display:block;}

.cart-drawer{position:fixed;right:-420px;top:0;width:400px;height:100%;background:white;box-shadow:-5px 0 20px rgba(0,0,0,0.2);transition:0.3s;padding:20px;overflow-y:auto;z-index:2000;}
.cart-drawer.active{right:0;}

.cart-item{background:#f1f3f6;padding:12px;border-radius:10px;margin-bottom:12px;line-height:1.6;}
.qty-btn{padding:4px 8px;margin:0 5px;background:#0984e3;color:white;border:none;border-radius:5px;cursor:pointer;}
.summary{margin-top:15px;padding-top:10px;border-top:1px solid #ccc;line-height:1.8;}
.discount-btn{background:#00cec9;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;margin-top:8px;}
.save-msg{color:green;font-weight:600;margin-top:5px;}
.delivery-note{font-size:13px;margin-top:5px;color:#e17055;}
.clear-btn{background:#d63031;color:white;border:none;padding:6px 10px;border-radius:6px;margin-top:10px;cursor:pointer;}
.send-btn{background:#00b894;color:white;padding:10px;border:none;width:100%;border-radius:8px;cursor:pointer;margin-top:10px;}
.cart-drawer input{width:100%;padding:8px;margin-top:8px;border-radius:6px;border:1px solid #ccc;}

.admin-panel{position:fixed;top:0;left:-380px;width:380px;height:100%;background:white;box-shadow:5px 0 20px rgba(0,0,0,0.2);padding:20px;transition:0.3s;z-index:3000;overflow:auto;}
.admin-panel.active{left:0;}
.admin-close{cursor:pointer;color:red;font-weight:bold;margin-bottom:10px;}
.admin-panel input{width:100%;padding:8px;margin-bottom:10px;}
.inventory-item{border-bottom:1px solid #ddd;padding:10px 0;}
.inventory-item img{width:60px;height:60px;object-fit:cover;border-radius:8px;}
.analytics-box{background:#f1f3f6;padding:10px;border-radius:8px;margin-top:10px;}
</style>
</head>
<body>

<header>
<div class="logo">Sunny Medicoze</div>
<button class="admin-btn" onclick="toggleAdmin()">Admin</button>
</header>

<div class="admin-panel" id="adminPanel">
<div class="admin-close" onclick="toggleAdmin()">âœ• Close</div>
<h3>Admin Panel</h3>
<input type="password" id="adminPass" placeholder="Password">
<button onclick="loginAdmin()">Login</button>
<div id="adminControls" style="display:none;">
<h4>Add Product</h4>
<input type="text" id="newName" placeholder="Name">
<input type="number" id="newPrice" placeholder="Price">
<input type="number" id="newStock" placeholder="Stock">
<input type="file" id="newImage">
<button onclick="addProduct()">Add</button>
<h4 style="margin-top:15px;">Inventory</h4>
<div id="inventoryList"></div>
<h4 style="margin-top:15px;">Order History</h4>
<div id="orderHistory"></div>
<h4 style="margin-top:15px;">Sales Analytics</h4>
<div class="analytics-box" id="analyticsBox"></div>
</div>
</div>

<section class="hero"><div class="hero-content"><h1>Your Trusted Medical Store</h1></div></section>

<section class="products">
<h2>Our Products</h2>
<input type="text" id="searchInput" class="search-bar" placeholder="Search..." onkeyup="searchProducts()">
<div class="grid" id="productGrid"></div>
</section>

<div class="cart-icon" onclick="openCart()">ðŸ›’
<div class="cart-count" id="cartCount">0</div>
</div>

<div class="overlay" id="overlay" onclick="closeCart()"></div>

<div class="cart-drawer" id="cartDrawer">
<h3>Your Cart</h3>
<div id="cartItems"></div>
<input type="text" id="custName" placeholder="Your Name">
<input type="text" id="custPhone" placeholder="Phone Number">
<input type="text" id="custAddress" placeholder="Delivery Address">
<button class="clear-btn" onclick="clearCart()">Clear Cart</button>
<button class="send-btn" onclick="sendOrder()">Send Order</button>
</div>

<script>
let cart=[],discountApplied=false,orders=[];
let totalRevenue=0,totalDiscount=0,totalDelivery=0,productSales={};

let products=[
{name:"WHISPER CHOICE ULTRA XL PLUS 15 PADS",price:190,stock:10,image:"https://i.ibb.co/tnfsXrv/Screenshot-28-2-2026-9818-www-bing-com.jpg"},
{name:"SMART AND HANDSOME FW 150 GM",price:290,stock:5,image:"https://i.ibb.co/V0QyR8CV/Screenshot-2026-02-28-113859.png"},
{name:"LIPTON GREEN TEA HONEY LEMON 25 BAGS",price:170,stock:8,image:"https://i.ibb.co/TM757M6Z/Screenshot-2026-02-28-114158.png"},
{name:"NOT OUT ADULT DIAPER M SIZE 10 PIECES PACK",price:299,stock:3,image:"https://i.ibb.co/ymr6DgzW/Screenshot-2026-02-28-114541.png"}
];

function renderProducts(){
productGrid.innerHTML="";
products.forEach((p,i)=>{
let msg="";
if(p.stock<=0) msg="<div class='low-stock'>Out of Stock</div>";
else if(p.stock<=3) msg="<div class='low-stock'>Only "+p.stock+" left</div>";
productGrid.innerHTML+=`
<div class="product">
<img src="${p.image}">
<h4>${p.name}</h4>
<p>â‚¹${p.price}</p>
${msg}
<button ${p.stock<=0?"disabled":""} onclick="addToCart(${i})">Add to Cart</button>
</div>`;
});
}
renderProducts();

function addToCart(i){
let p=products[i];
if(p.stock<=0)return;
let ex=cart.find(x=>x.index===i);
if(ex && ex.qty>=3){alert("Max 3 allowed");return;}
if(ex) ex.qty++; else cart.push({index:i,qty:1});
p.stock--;updateCart();renderProducts();
}

function calculateDiscount(sub){
if(sub<699)return 0;
let percent=sub>=899?0.10:0.095;
let discount=sub*percent;
let after=sub-discount;
after=Math.ceil(after); 
discount=sub-after;
let actualPercent=(discount/sub)*100;
if(actualPercent<9) discount=sub*0.09;
if(actualPercent>10) discount=sub*0.10;
return Math.round(discount);
}

function toggleDiscount(){discountApplied=!discountApplied;updateCart();}

function updateCart(){
cartCount.innerText=cart.reduce((t,i)=>t+i.qty,0);
let sub=0,html="";
cart.forEach((item,i)=>{
let p=products[item.index],total=p.price*item.qty;
sub+=total;
html+=`<div class="cart-item">
${p.name}<br>
<button class="qty-btn" onclick="decrease(${i})">-</button>
${item.qty}
<button class="qty-btn" onclick="increase(${i})">+</button>
= â‚¹${total}
</div>`;
});
let discount=discountApplied?calculateDiscount(sub):0;
let after=sub-discount;
let delivery=0;
if(after<399) delivery=0;
else if(after<699) delivery=discountApplied?20:40;
else delivery=0;
let final=after+delivery;
let deliverySaved=(delivery==0?40-delivery: (delivery==20?20:0));
let totalSaved=discount+deliverySaved;

let discountUI="";
if(sub>=699){
discountUI=`<button class="discount-btn" onclick="toggleDiscount()">
${discountApplied?"Remove Discount":"Apply Discount"}
</button>`;
}
let saveMsg=discountApplied?`
<div class="save-msg">
ðŸŽ‰ Discount Saved: â‚¹${discount}<br>
ðŸšš Delivery Saved: â‚¹${deliverySaved}<br>
ðŸ’° Total Saved Today: â‚¹${totalSaved}
</div>`:"";

html+=`<div class="summary">
Subtotal: â‚¹${sub}<br>
Discount: -â‚¹${discount}<br>
Delivery: â‚¹${delivery}<br>
<b>Final: â‚¹${final}</b>
${discountUI}
${saveMsg}
</div>`;

cartItems.innerHTML=html;
}

function increase(i){
let item=cart[i],p=products[item.index];
if(item.qty>=3){alert("Max 3 allowed");return;}
if(p.stock<=0)return;
item.qty++;p.stock--;updateCart();renderProducts();
}
function decrease(i){
let item=cart[i],p=products[item.index];
item.qty--;p.stock++;
if(item.qty<=0) cart.splice(i,1);
updateCart();renderProducts();
}
function clearCart(){
cart.forEach(item=>products[item.index].stock+=item.qty);
cart=[];discountApplied=false;updateCart();renderProducts();
}

function sendOrder(){
let name=custName.value,phone=custPhone.value,address=custAddress.value;
if(!name||!phone||!address){alert("Fill customer details");return;}
let sub=cart.reduce((t,i)=>t+products[i.index].price*i.qty,0);
if(sub<399){alert("Minimum â‚¹399 required");return;}
let discount=discountApplied?calculateDiscount(sub):0;
let after=sub-discount;
let delivery=after<399?0:(after<699?(discountApplied?20:40):0);
let final=after+delivery;
let orderId="SM"+Date.now(),now=new Date().toLocaleString();
orders.push({id:orderId,total:final});
totalRevenue+=final;totalDiscount+=discount;totalDelivery+=delivery;
cart.forEach(i=>{let n=products[i.index].name;productSales[n]=(productSales[n]||0)+i.qty;});
renderAnalytics();renderOrders();
let msg="ðŸ§¾ Sunny Medicoze Invoice%0A%0A";
msg+="Order ID: "+orderId+"%0ADate: "+now+"%0A%0A";
msg+="Name: "+name+"%0APhone: "+phone+"%0AAddress: "+address+"%0A%0A";
cart.forEach(i=>msg+=products[i.index].name+" x"+i.qty+"%0A");
msg+="%0ASubtotal: â‚¹"+sub;
msg+="%0ADiscount: -â‚¹"+discount;
msg+="%0ADelivery: â‚¹"+delivery;
msg+="%0AðŸ’° Final: â‚¹"+final;
msg+="%0A%0AðŸŽ‰ You Saved â‚¹"+(discount+(delivery==0?40:(delivery==20?20:0)));
window.open("https://wa.me/919817824881?text="+msg,"_blank");
clearCart();closeCart();
}

function renderOrders(){
orderHistory.innerHTML="";
orders.forEach(o=>orderHistory.innerHTML+=`Order ${o.id} - â‚¹${o.total}<br>`);
}
function renderAnalytics(){
let best=Object.keys(productSales).reduce((a,b)=>productSales[a]>productSales[b]?a:b,"None");
analyticsBox.innerHTML=`
Total Orders: ${orders.length}<br>
Total Revenue: â‚¹${totalRevenue}<br>
Total Discount Given: â‚¹${totalDiscount}<br>
Total Delivery Collected: â‚¹${totalDelivery}<br>
Best Selling Product: ${best}
`;
}

function toggleAdmin(){adminPanel.classList.toggle("active");}
function loginAdmin(){if(adminPass.value==="sunnyadmin"){adminControls.style.display="block";renderInventory();renderAnalytics();renderOrders();}}
function addProduct(){
let reader=new FileReader();
reader.onload=function(e){
products.push({name:newName.value,price:parseFloat(newPrice.value),stock:parseInt(newStock.value),image:e.target.result});
renderProducts();renderInventory();
};
if(newImage.files[0]) reader.readAsDataURL(newImage.files[0]);
}
function renderInventory(){
inventoryList.innerHTML="";
products.forEach((p,i)=>{
inventoryList.innerHTML+=`
<div class="inventory-item">
<img src="${p.image}"><br>
<b>${p.name}</b><br>
Stock: <input type="number" value="${p.stock}" onchange="updateStock(${i},this.value)">
<button onclick="deleteProduct(${i})">Delete</button>
</div>`;
});
}
function updateStock(i,val){products[i].stock=parseInt(val);renderProducts();}
function deleteProduct(i){products.splice(i,1);cart=cart.filter(item=>item.index!==i);renderProducts();renderInventory();updateCart();}

function openCart(){overlay.classList.add("active");cartDrawer.classList.add("active");}
function closeCart(){overlay.classList.remove("active");cartDrawer.classList.remove("active");}
function searchProducts(){
let val=searchInput.value.toLowerCase();
document.querySelectorAll(".product").forEach(p=>{
p.style.display=p.innerText.toLowerCase().includes(val)?"block":"none";
});
}
</script>
</body>
</html>
